{% extends 'base.html' %}

{% load i18n %}

{% load static %}

{% block title %}{{post_detail.title}}{% endblock title %}


{% block head_script %}
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.1/styles/docco.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.1/highlight.min.js"></script>
<script>hljs.highlightAll();</script>
{% endblock head_script %}




{% block css_style %}
<link rel="stylesheet" href="{% static 'posts/css/single_post.css' %}">{% endblock css_style %}
{% block css_responsive %}
<link rel="stylesheet" href="{% static 'posts/css_responsive/single_post_responsive.css' %}">
{% endblock css_responsive %}


{% block content %}
<div class="main_section">
    <div class="container">
        <div class="left_section">
            <div class="left_main_section">

                <div {% if post_detail.id|slugify in liked_posts %} class="icon_group one active" {% else %}
                    class="icon_group one" {% endif %}>
                    <div class="icon">

                        <form action="{% url 'reactions' post_detail.id %}" method="POST">
                            {% csrf_token %}

                            <button {% if post_detail.id|slugify in liked_posts %} class="active" {% endif %}>
                                <input type="hidden" value="{{ post_detail.id }}" name="liked_id">

                                <svg xmlns="http://www.w3.org/2000/svg" width="30" height="28.5" viewBox="0 0 30 28.5">
                                    <g id="Iconly_Broken_Heart" data-name="Iconly/Broken/Heart"
                                        transform="translate(3 -2.5)">
                                        <g id="Heart" transform="translate(2 2.5)">
                                            <path id="Path_1028" data-name="Path 1028"
                                                d="M15.009,1.56A9.847,9.847,0,0,1,23.281.454a9.312,9.312,0,0,1,5.572,4.787,11.85,11.85,0,0,1,.5,8.94,18.777,18.777,0,0,1-4.447,7.146,35.8,35.8,0,0,1-4.222,3.708h0l-.079.067a1.086,1.086,0,0,1-1.509-.3,1.121,1.121,0,0,1-.192-.839,1.108,1.108,0,0,1,.457-.725,35,35,0,0,0,3.971-3.492,16.42,16.42,0,0,0,3.971-6.27,9.518,9.518,0,0,0-.45-7.2,7.17,7.17,0,0,0-4.275-3.668,7.563,7.563,0,0,0-6.922,1.227,1.1,1.1,0,0,1-1.323,0A7.55,7.55,0,0,0,7.412,2.611,7.167,7.167,0,0,0,3.1,6.265a9.6,9.6,0,0,0-.424,7.173A16.472,16.472,0,0,0,6.644,19.7a49.558,49.558,0,0,0,8.63,6.742,1.144,1.144,0,0,1,.431,1.257,1.115,1.115,0,0,1-1.04.806,1.058,1.058,0,0,1-.609-.189,51.458,51.458,0,0,1-8.987-7.025A18.546,18.546,0,0,1,.609,14.14a11.918,11.918,0,0,1,.556-8.9A9.312,9.312,0,0,1,6.737.454,9.848,9.848,0,0,1,15.009,1.56ZM20.664,6h.168a5.2,5.2,0,0,1,3.56,4.517h0l.009.176a1.119,1.119,0,0,1-.23.647,1.081,1.081,0,0,1-.731.417,1.116,1.116,0,0,1-1.244-.971,2.958,2.958,0,0,0-2.038-2.7,1.143,1.143,0,0,1-.467-1.315A1.112,1.112,0,0,1,20.832,6Z"
                                                transform="translate(-5 0)" />
                                        </g>
                                    </g>
                                </svg>
                                <p {% if post_detail.id|slugify in liked_posts %} class="active" {% endif %}>
                                    {{post_detail.heart_count}}</p>

                            </button>
                        </form>

                    </div>


                </div>


                <div {% if post_detail.id|slugify in was_commented %} class="icon_group two active" {% else %}
                    class="icon_group two" {% endif %}>
                    <!-- <div class="icon_group two"> -->
                    <div class="icon">

                        <a {% if post_detail.id|slugify in was_commented %} class="active" {% endif %}>
                            <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30">
                                <g id="left_chat" transform="translate(-2 -2)">
                                    <g id="Chat" transform="translate(2 2)">
                                        <path id="Path_1030" data-name="Path 1030"
                                            d="M15.01,0a15,15,0,0,1-.017,30,14.886,14.886,0,0,1-3.222-.353,1.124,1.124,0,1,1,.487-2.194,12.753,12.753,0,1,0,2.75-25.207h0A12.756,12.756,0,0,0,3.69,20.9h0l.288.563a2.945,2.945,0,0,1,.2,2.224,25.677,25.677,0,0,0-.8,2.449c.843-.254,1.872-.628,2.616-.9H6l.305-.11a1.123,1.123,0,0,1,.764,2.112h0l-.3.11a35.633,35.633,0,0,1-3.662,1.187,1.16,1.16,0,0,1-.267.028A1.81,1.81,0,0,1,1.5,28.046a1.966,1.966,0,0,1-.5-1.5,1.147,1.147,0,0,1,.029-.221,26.273,26.273,0,0,1,1.034-3.368.7.7,0,0,0-.074-.464h0l-.289-.562A15,15,0,0,1,14.993,0h.017Zm-.017,13.214A1.784,1.784,0,1,1,13.21,15,1.785,1.785,0,0,1,14.994,13.214Zm6.6,0A1.784,1.784,0,1,1,19.815,15,1.785,1.785,0,0,1,21.6,13.214Zm-13.21,0A1.783,1.783,0,1,1,6.605,15,1.785,1.785,0,0,1,8.389,13.215Z"
                                            transform="translate(0)" />
                                    </g>
                                </g>
                            </svg>
                            <p {% if post_detail.id|slugify in was_commented %} class="active" {% endif %}>
                                {{post_detail.comment_count}}</p>

                        </a>

                    </div>


                </div>
                <div {% if post_detail.id|slugify in stored_posts %} class="icon_group three active" {% else %}
                    class="icon_group three" {% endif %}>
                    <div class="icon">

                        <form action="{% url 'save_post' %}" method="POST">
                            {% csrf_token %}

                            <button {% if post_detail.id|slugify in stored_posts %} class="active" {% endif %}>
                                <input type="hidden" value="{{ post_detail.id }}" name="post_id">



                                <svg xmlns="http://www.w3.org/2000/svg" width="30" height="36.705"
                                    viewBox="0 0 30 36.705">
                                    <g id="Iconly_Light-Outline_Bookmark" data-name="Iconly/Light-Outline/Bookmark"
                                        transform="translate(2.817 -2)">
                                        <g id="Bookmark" transform="translate(3 2)">
                                            <path id="Combined-Shape"
                                                d="M20.6,0C26.574,0,30,2.956,30,8.106V33.7A2.993,2.993,0,0,1,25.538,36.3L15.045,30.377l-10.59,5.94A2.994,2.994,0,0,1,0,33.708V7.784C0,2.836,3.428,0,9.405,0Zm0,2.641H9.405c-4.488,0-6.764,1.729-6.764,5.143V33.708a.333.333,0,0,0,.174.3.329.329,0,0,0,.349,0l11.237-6.3a1.326,1.326,0,0,1,1.3,0L26.836,34a.329.329,0,0,0,.35,0,.337.337,0,0,0,.173-.3V7.905C27.345,6.39,27.052,2.641,20.6,2.641Zm.773,9.206a1.32,1.32,0,0,1,0,2.641H8.489a1.32,1.32,0,1,1,0-2.641Z"
                                                transform="translate(-5.816 0)" fill-rule="evenodd" />
                                        </g>
                                    </g>
                                </svg>


                            </button>
                        </form>
                    </div>


                </div>
            </div>



        </div>
        <div class="middle_section">

            <div class="latest_all_cards">
                <div class="latest_card">
                    <div class="image_section">
                        <img src="{{post_detail.cover.url}}" alt="image">
                        <div class="overly"></div>
                    </div>
                    <div class="text_section">
                        <h5 class="first_date">{{post_detail.created_date|date}}</h5>
                        <h3>{{post_detail.title}}
                        </h3>
                        <h5 class="last_date">{{post_detail.created_date|date}}</h5>
                        <div class="tags">
                            {% for tag in post_detail.tags.all %}

                            <a href="{% url 'home' %}search/?search={{tag}}"><span>#</span>{{tag}}</a>

                            {% endfor %}
                        </div>

                        <div class="details_text">
                            <p>
                                {{post_detail.description|safe}}
                            </p>

                            <div class="react_icon">
                                <form action="{% url 'reactions' post_detail.id %}" method="POST" class="mobile form">
                                    {% csrf_token %}
                                    <button {% if post_detail.id|slugify in liked_posts %} class="heart" {% endif %}>
                                        <input type="hidden" value="{{ post_detail.id }}" name="liked_id">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="23" height="21.85"
                                            viewBox="0 0 23 21.85">
                                            <path id="Path_1028" data-name="Path 1028"
                                                d="M11.507,1.2A7.55,7.55,0,0,1,17.849.348a7.139,7.139,0,0,1,4.272,3.67,9.085,9.085,0,0,1,.386,6.854A14.4,14.4,0,0,1,19.1,16.35a27.446,27.446,0,0,1-3.237,2.843h0l-.061.052a.833.833,0,0,1-1.157-.227.86.86,0,0,1-.148-.643.849.849,0,0,1,.35-.556,26.836,26.836,0,0,0,3.044-2.677,12.589,12.589,0,0,0,3.044-4.807,7.3,7.3,0,0,0-.345-5.52A5.5,5.5,0,0,0,17.311,2,5.8,5.8,0,0,0,12,2.943a.84.84,0,0,1-1.015,0A5.788,5.788,0,0,0,5.682,2,5.5,5.5,0,0,0,2.374,4.8a7.36,7.36,0,0,0-.325,5.5,12.629,12.629,0,0,0,3.044,4.8,37.995,37.995,0,0,0,6.616,5.169.877.877,0,0,1,.33.964.855.855,0,0,1-.8.618.811.811,0,0,1-.467-.145,39.452,39.452,0,0,1-6.89-5.386,14.219,14.219,0,0,1-3.42-5.479A9.137,9.137,0,0,1,.893,4.018,7.139,7.139,0,0,1,5.165.348,7.55,7.55,0,0,1,11.507,1.2Zm4.336,3.4h.129A3.986,3.986,0,0,1,18.7,8.06h0l.007.135a.858.858,0,0,1-.176.5.829.829,0,0,1-.561.32.855.855,0,0,1-.954-.744A2.268,2.268,0,0,0,15.454,6.2.876.876,0,0,1,15.1,5.191a.853.853,0,0,1,.876-.594Z" />
                                        </svg>
                                    </button>
                                </form>
                                

                                <form action="{% url 'save_post' %}" method="POST" class="mobile form">
                                    {% csrf_token %}
                                        <button {% if post_detail.id|slugify in stored_posts %} class="active" {% endif %}>
                                            <input type="hidden" value="{{ post_detail.id }}" name="post_id">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="22.023"
                                                viewBox="0 0 18 22.023">
                                                <g id="Group_366" data-name="Group 366"
                                                    transform="translate(-77 -281.462)">
                                                    <path id="Combined-Shape"
                                                        d="M12.361,0C15.944,0,18,1.774,18,4.864V20.219a1.8,1.8,0,0,1-2.677,1.563l-6.3-3.557L2.672,21.79A1.8,1.8,0,0,1,0,20.225V4.67C0,1.7,2.057,0,5.643,0Zm0,1.585H5.643c-2.693,0-4.059,1.037-4.059,3.086V20.225a.2.2,0,0,0,.1.181.2.2,0,0,0,.209,0L8.64,16.626a.8.8,0,0,1,.778,0L16.1,20.4a.2.2,0,0,0,.21,0,.2.2,0,0,0,.1-.182V4.743C16.407,3.834,16.231,1.585,12.361,1.585Zm.464,5.523a.792.792,0,0,1,0,1.585H5.094a.792.792,0,0,1,0-1.585Z"
                                                        transform="translate(77 281.462)" fill-rule="evenodd" />
                                                </g>
                                            </svg>

                                        </button>
                                </form>
                            </div>
                        </div>

                    </div>


                </div>

            </div>
            <div class="discussion_part">
                <div class="discussion_heading">
                    <h3>{% trans 'Discussion' %}</h3>
                </div>

                <!-- {% for comment in comments %}
                {% if '/en/' in request.path %}
                <div class="discussion_card">
                    <div class="header_part">
                        <h4>{{comment.user_name}}</h4>
                        <p>{{comment.creation_date}}</p>
                    </div>
                    <div class="discussion_footer_part">
                        <p>{{comment.text_en}}</p>
                    </div>
                </div>
                {% else %}
                <div class="discussion_card">
                    <div class="header_part">
                        <h4>{{comment.user_name}}</h4>
                        <p>{{comment.creation_date}}</p>
                    </div>
                    <div class="discussion_footer_part">
                        <p>{{comment.text_pl}}</p>
                    </div>
                </div>
                {% endif %}
                {% endfor %} -->

                {% for comment in comments %}
                <div class="discussion_card">
                    <div class="header_part">
                        <h4>{{comment.user_name}}</h4>
                        <p>{{comment.creation_date}}</p>
                    </div>
                    <div class="discussion_footer_part">
                        <p>{{comment.text_en}}</p>
                        <p>{{comment.text_pl}}</p>
                    </div>
                </div>
                {% endfor %}







            </div>
            <form action="{% url 'submit_comment' post_detail.id %}" method="POST">
                {% csrf_token %}
                <div class="form_heading">
                    <h3>{% trans 'Your comment' %}</h3>
                </div>

                <div class="form_group">
                    <label for="text">{% trans 'Your name:' %}</label>
                    <input type="text" name="user_name" maxlength="30">
                </div>
                <div class="form_group">
                    <label for="text">{% trans 'Your Email:' %}</label>
                    <input type="text" name="user_email">
                </div>
                <div class="form_group">
                    <label for="text">{% trans 'Comment:' %}</label>
                    {% if '/en/' in request.path %}
                    <textarea name="text_en" maxlength="1000"></textarea>

                    {% else %}
                    <textarea name="text_pl" maxlength="1000"></textarea>
                    {% endif %}
                </div>
                <button type="submit">{% trans 'Submit' %}</button>
            </form>






        </div>

        {% include 'includes/right_section.html' %}
        
    </div>

</div>
{% endblock content %}